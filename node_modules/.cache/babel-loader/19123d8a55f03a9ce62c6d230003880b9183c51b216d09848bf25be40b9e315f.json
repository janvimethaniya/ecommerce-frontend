{"ast":null,"code":"import _objectSpread from\"D:/new mern stack/react/project4/ecommerce/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";export const ShopContext=/*#__PURE__*/createContext(null);const ShopContextProvider=_ref=>{let{children}=_ref;const[all_product,setAll_Product]=useState([]);const[cartItems,setCartItems]=useState({});/* ================= FETCH PRODUCTS ================= */useEffect(()=>{fetch(\"http://localhost:7000/allproducts\").then(res=>res.json()).then(data=>setAll_Product(data)).catch(err=>console.error(\"Product fetch error:\",err));},[]);/* ================= ADD TO CART ================= */const addToCart=itemId=>{setCartItems(prev=>{const existing=prev[itemId]||{qty:0,size:\"\"};return _objectSpread(_objectSpread({},prev),{},{[itemId]:_objectSpread(_objectSpread({},existing),{},{qty:existing.qty+1})});});};/* ================= ADD TO CART WITH SIZE ================= */const addToCartWithSize=(itemId,size)=>{setCartItems(prev=>{const existing=prev[itemId]||{qty:0,size:\"\"};return _objectSpread(_objectSpread({},prev),{},{[itemId]:{qty:existing.qty+1,size}});});};/* ================= REMOVE (−1) ================= */const removeFromCart=itemId=>{setCartItems(prev=>{if(!prev[itemId])return prev;const newQty=prev[itemId].qty-1;if(newQty<=0){const updated=_objectSpread({},prev);delete updated[itemId];return updated;}return _objectSpread(_objectSpread({},prev),{},{[itemId]:_objectSpread(_objectSpread({},prev[itemId]),{},{qty:newQty})});});};/* ================= SET EXACT QUANTITY (EDIT) ================= */const setItemQuantity=(itemId,qty)=>{setCartItems(prev=>{if(qty<=0){const updated=_objectSpread({},prev);delete updated[itemId];return updated;}return _objectSpread(_objectSpread({},prev),{},{[itemId]:_objectSpread(_objectSpread({},prev[itemId]||{}),{},{qty})});});};/* ================= DELETE ITEM ================= */const deleteFromCart=itemId=>{setCartItems(prev=>{const updated=_objectSpread({},prev);delete updated[itemId];return updated;});};/* ================= TOTAL ITEMS (NAVBAR COUNT) ================= */const getTotalItems=()=>{return Object.values(cartItems).reduce((total,item)=>total+item.qty,0);};/* ================= CONTEXT VALUE ================= */const contextValue={all_product,cartItems,addToCart,addToCartWithSize,removeFromCart,setItemQuantity,deleteFromCart,getTotalItems};return/*#__PURE__*/_jsx(ShopContext.Provider,{value:contextValue,children:children});};export default ShopContextProvider;","map":{"version":3,"names":["React","createContext","useEffect","useState","jsx","_jsx","ShopContext","ShopContextProvider","_ref","children","all_product","setAll_Product","cartItems","setCartItems","fetch","then","res","json","data","catch","err","console","error","addToCart","itemId","prev","existing","qty","size","_objectSpread","addToCartWithSize","removeFromCart","newQty","updated","setItemQuantity","deleteFromCart","getTotalItems","Object","values","reduce","total","item","contextValue","Provider","value"],"sources":["D:/new mern stack/react/project4/ecommerce/src/Context/Shopcontext.jsx"],"sourcesContent":["import React, { createContext, useEffect, useState } from \"react\";\r\n\r\nexport const ShopContext = createContext(null);\r\n\r\nconst ShopContextProvider = ({ children }) => {\r\n  const [all_product, setAll_Product] = useState([]);\r\n  const [cartItems, setCartItems] = useState({}); \r\n\r\n  /* ================= FETCH PRODUCTS ================= */\r\n  useEffect(() => {\r\n    fetch(\"http://localhost:7000/allproducts\")\r\n      .then((res) => res.json())\r\n      .then((data) => setAll_Product(data))\r\n      .catch((err) => console.error(\"Product fetch error:\", err));\r\n  }, []);\r\n\r\n  /* ================= ADD TO CART ================= */\r\n  const addToCart = (itemId) => {\r\n    setCartItems((prev) => {\r\n      const existing = prev[itemId] || { qty: 0, size: \"\" };\r\n      return {\r\n        ...prev,\r\n        [itemId]: {\r\n          ...existing,\r\n          qty: existing.qty + 1,\r\n        },\r\n      };\r\n    });\r\n  };\r\n\r\n  /* ================= ADD TO CART WITH SIZE ================= */\r\n  const addToCartWithSize = (itemId, size) => {\r\n    setCartItems((prev) => {\r\n      const existing = prev[itemId] || { qty: 0, size: \"\" };\r\n      return {\r\n        ...prev,\r\n        [itemId]: {\r\n          qty: existing.qty + 1,\r\n          size,\r\n        },\r\n      };\r\n    });\r\n  };\r\n\r\n  /* ================= REMOVE (−1) ================= */\r\n  const removeFromCart = (itemId) => {\r\n    setCartItems((prev) => {\r\n      if (!prev[itemId]) return prev;\r\n\r\n      const newQty = prev[itemId].qty - 1;\r\n\r\n      if (newQty <= 0) {\r\n        const updated = { ...prev };\r\n        delete updated[itemId];\r\n        return updated;\r\n      }\r\n\r\n      return {\r\n        ...prev,\r\n        [itemId]: {\r\n          ...prev[itemId],\r\n          qty: newQty,\r\n        },\r\n      };\r\n    });\r\n  };\r\n\r\n  /* ================= SET EXACT QUANTITY (EDIT) ================= */\r\n  const setItemQuantity = (itemId, qty) => {\r\n    setCartItems((prev) => {\r\n      if (qty <= 0) {\r\n        const updated = { ...prev };\r\n        delete updated[itemId];\r\n        return updated;\r\n      }\r\n\r\n      return {\r\n        ...prev,\r\n        [itemId]: {\r\n          ...(prev[itemId] || {}),\r\n          qty,\r\n        },\r\n      };\r\n    });\r\n  };\r\n\r\n  /* ================= DELETE ITEM ================= */\r\n  const deleteFromCart = (itemId) => {\r\n    setCartItems((prev) => {\r\n      const updated = { ...prev };\r\n      delete updated[itemId];\r\n      return updated;\r\n    });\r\n  };\r\n\r\n  /* ================= TOTAL ITEMS (NAVBAR COUNT) ================= */\r\n  const getTotalItems = () => {\r\n    return Object.values(cartItems).reduce(\r\n      (total, item) => total + item.qty,\r\n      0\r\n    );\r\n  };\r\n\r\n  /* ================= CONTEXT VALUE ================= */\r\n  const contextValue = {\r\n    all_product,\r\n    cartItems,\r\n    addToCart,\r\n    addToCartWithSize,\r\n    removeFromCart,\r\n    setItemQuantity,\r\n    deleteFromCart,\r\n    getTotalItems,\r\n  };\r\n\r\n  return (\r\n    <ShopContext.Provider value={contextValue}>\r\n      {children}\r\n    </ShopContext.Provider>\r\n  );\r\n};\r\n\r\nexport default ShopContextProvider;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}