{"ast":null,"code":"import _objectSpread from\"D:/new mern stack/react/project4/ecommerce/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useContext}from'react';import CartItem from'../Component/CartItem/CartItem';import{ShopContext}from'../Context/Shopcontext';import'./css/cart.css';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Cart=()=>{const{cartItems,all_product,addToCart,removeFromCart,setItemQuantity,deleteFromCart}=useContext(ShopContext);// ----------------------------\n// SAFE CART LIST BUILDING\n// ----------------------------\nconst cartProducts=Object.entries(cartItems||{}).filter(_ref=>{let[,item]=_ref;return(item===null||item===void 0?void 0:item.qty)>0;}).map(_ref2=>{let[id,item]=_ref2;const product=all_product.find(p=>Number(p.id)===Number(id));if(!product)return null;// product missing → skip\nreturn _objectSpread(_objectSpread({},product),{},{quantity:item.qty,size:item.size,image:product.image// ✔ FINAL FIX\n});}).filter(Boolean);// ----------------------------\n// TOTAL SUBTOTAL\n// ----------------------------\nconst subtotal=cartProducts.reduce((acc,item)=>acc+item.new_price*item.quantity,0);const navigate=useNavigate();// ----------------------------\n// HANDLE DELETE\n// ----------------------------\nconst handleDelete=id=>{deleteFromCart(id);};// ----------------------------\n// HANDLE QUANTITY CHANGE\n// ----------------------------\nconst handleSetQuantity=(id,qty)=>{setItemQuantity(id,qty);};return/*#__PURE__*/_jsxs(\"div\",{className:\"cart-page\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Your Cart\"}),cartProducts.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"cart-empty\",children:\"Your cart is empty. Add products to the cart.\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"cart-grid\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-list\",children:cartProducts.map(p=>/*#__PURE__*/_jsx(CartItem,{id:p.id,name:p.name,image:p.image// ✔ FINAL FIX\n,price:p.new_price,quantity:p.quantity,size:p.size,onAdd:addToCart,onRemove:removeFromCart,onDelete:handleDelete,onSetQuantity:handleSetQuantity},p.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-summary\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Order Summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Subtotal\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20B9\",subtotal.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Shipping\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Calculated at checkout\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-total\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20B9\",subtotal.toFixed(2)]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"checkout-btn\",onClick:()=>navigate('/checkout'),children:\"Proceed to Checkout\"})]})]})]});};export default Cart;","map":{"version":3,"names":["React","useContext","CartItem","ShopContext","useNavigate","jsx","_jsx","jsxs","_jsxs","Cart","cartItems","all_product","addToCart","removeFromCart","setItemQuantity","deleteFromCart","cartProducts","Object","entries","filter","_ref","item","qty","map","_ref2","id","product","find","p","Number","_objectSpread","quantity","size","image","Boolean","subtotal","reduce","acc","new_price","navigate","handleDelete","handleSetQuantity","className","children","length","name","price","onAdd","onRemove","onDelete","onSetQuantity","toFixed","onClick"],"sources":["D:/new mern stack/react/project4/ecommerce/src/Pages/Cart.jsx"],"sourcesContent":["import React, { useContext } from 'react'\r\nimport CartItem from '../Component/CartItem/CartItem'\r\nimport { ShopContext } from '../Context/Shopcontext'\r\nimport './css/cart.css'\r\n\r\nimport { useNavigate } from 'react-router-dom'\r\nconst Cart = () => {\r\n  const { cartItems, all_product, addToCart, removeFromCart, setItemQuantity, deleteFromCart } = useContext(ShopContext)\r\n\r\n  // ----------------------------\r\n  // SAFE CART LIST BUILDING\r\n  // ----------------------------\r\n  const cartProducts = Object.entries(cartItems || {})\r\n    .filter(([, item]) => item?.qty > 0)\r\n    .map(([id, item]) => {\r\n      const product = all_product.find(p => Number(p.id) === Number(id))\r\n\r\n      if (!product) return null  // product missing → skip\r\n\r\n      return {\r\n        ...product,\r\n        quantity: item.qty,\r\n        size: item.size,\r\n        image: product.image,   // ✔ FINAL FIX\r\n      }\r\n    })\r\n    .filter(Boolean)\r\n\r\n  // ----------------------------\r\n  // TOTAL SUBTOTAL\r\n  // ----------------------------\r\n  const subtotal = cartProducts.reduce(\r\n    (acc, item) => acc + item.new_price * item.quantity,\r\n    0\r\n  )\r\n\r\n  const navigate = useNavigate()\r\n\r\n  // ----------------------------\r\n  // HANDLE DELETE\r\n  // ----------------------------\r\n  const handleDelete = (id) => {\r\n    deleteFromCart(id)\r\n  }\r\n\r\n  // ----------------------------\r\n  // HANDLE QUANTITY CHANGE\r\n  // ----------------------------\r\n  const handleSetQuantity = (id, qty) => {\r\n    setItemQuantity(id, qty)\r\n  }\r\n\r\n  return (\r\n    <div className=\"cart-page\">\r\n      <h1>Your Cart</h1>\r\n\r\n      {cartProducts.length === 0 ? (\r\n        <div className=\"cart-empty\">Your cart is empty. Add products to the cart.</div>\r\n      ) : (\r\n        <div className=\"cart-grid\">\r\n\r\n          {/* ---------------------------- */}\r\n          {/* CART PRODUCT LIST */}\r\n          {/* ---------------------------- */}\r\n          <div className=\"cart-list\">\r\n            {cartProducts.map((p) => (\r\n              <CartItem\r\n                key={p.id}\r\n                id={p.id}\r\n                name={p.name}\r\n                image={p.image}     // ✔ FINAL FIX\r\n                price={p.new_price}\r\n                quantity={p.quantity}\r\n                size={p.size}\r\n                onAdd={addToCart}\r\n                onRemove={removeFromCart}\r\n                onDelete={handleDelete}\r\n                onSetQuantity={handleSetQuantity}\r\n              />\r\n            ))}\r\n          </div>\r\n\r\n          {/* ---------------------------- */}\r\n          {/* ORDER SUMMARY */}\r\n          {/* ---------------------------- */}\r\n          <div className=\"cart-summary\">\r\n            <h3>Order Summary</h3>\r\n\r\n            <div className=\"summary-row\">\r\n              <span>Subtotal</span>\r\n              <span>₹{subtotal.toFixed(2)}</span>\r\n            </div>\r\n\r\n            <div className=\"summary-row\">\r\n              <span>Shipping</span>\r\n              <span>Calculated at checkout</span>\r\n            </div>\r\n\r\n            <div className=\"summary-total\">\r\n              <span>Total</span>\r\n              <span>₹{subtotal.toFixed(2)}</span>\r\n            </div>\r\n\r\n      <button\r\n  className=\"checkout-btn\"\r\n  onClick={() => navigate('/checkout')}\r\n>\r\n  Proceed to Checkout\r\n</button>\r\n\r\n          </div>\r\n\r\n        </div>\r\n        \r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Cart\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}